<odoo>
    <data>
        <record id="crm_lead_status_form_view" model="ir.ui.view">
            <field name="name">crm.lead.status</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_lead_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//header" position="inside">
                        <field name="type" widget="statusbar" statusbar_visible="lead,opportunity" />
                </xpath>
                <xpath expr="//group[@name='opportunity_partner']/field[@name='partner_id']" position="after">
                    <field name="partner_portal_user_state" readonly="1" force_save="1"/>
                    <field name="application_status" readonly="1" force_save="1"/>
                    <field name="partner_portal_user" invisible="1"/>
                    <field name="portal_email_state" invisible="1"/>
                </xpath>
                <xpath expr="//group[@name='lead_partner']/field[@name='lang_id']" position="after">
                    <field name="partner_portal_user_state" readonly="1" force_save="1"/>
                    <field name="partner_portal_user" invisible="1"/>
                    <field name="portal_email_state" invisible="1"/>
                </xpath>
            </field>
        </record>

        <record id="crm_lead_student_status_filter" model="ir.ui.view">
            <field name="name">crm.lead.student.status.filter</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_leads_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//group/filter[@name='salesperson']" position="after">
                    <filter string="Student Log in Status" name="student_log_in_status" context="{'group_by':'partner_portal_user_state'}"/>
                    <filter string="Application Status" name="application_status" context="{'group_by':'application_status'}"/>
                </xpath>
            </field>
        </record>

        <record id="crm_opportunity_student_status_filter" model="ir.ui.view">
            <field name="name">crm.opportunity.student.status.filter</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//group/filter[@name='salesperson']" position="after">
                    <filter string="Student Log in Status" name="student_log_in_status" context="{'group_by':'partner_portal_user_state'}"/>
                    <filter string="Application Status" name="application_status" context="{'group_by':'application_status'}"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="openeducat_custom_crm_lead_inherit_form">
            <field name="name">.openeducat.custom.crm.lead.inherited.form</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="openeducat_custom.core_openeducat_crm_lead_form"/>
            <field name="arch" type="xml">
                <button name="action_send_mail" position="attributes">
                    <attribute name="attrs">{'invisible':[('application_status', '=', 'submitted')]}</attribute>
                </button>
                <button name="action_create_student" position="attributes">
                    <attribute name="attrs">{'invisible':['|', ('student_id', '!=', False), ('application_status', '!=', 'submitted')]}</attribute>
                </button>
            </field>
        </record>
    </data>
</odoo>